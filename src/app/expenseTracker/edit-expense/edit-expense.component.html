<div class="container form-dialog">
    <h1>{{title}}</h1>
    <form #editExpenseForm="ngForm" (ngSubmit)="onSubmit(); resetTags(); editExpenseForm.reset(); closingSnackBar('submit')"
      #editExpenseForm="ngForm">
      <div class="form-group">
        <label for="reason">Reason</label>
        <input type="text" class="form-control" id="reason"
            required
            [(ngModel)]="actualExpense.reason" name="reason"
            #reason="ngModel">
        <div [hidden]="reason.valid || reason.pristine"
        class="alert alert-danger">
        Reason is required
        </div>
      </div>

      <div class="form-group">
        <label for="amount">Amount</label>
        <input type="number" class="form-control" id="amount"
            required
            [(ngModel)]="actualExpense.amount.value" name="amount"
            #amount="ngModel">
        <div [hidden]="amount.valid || amount.pristine"
        class="alert alert-danger">
        Amount is required
        </div>
      </div>

      <div class="form-group">
        <label for="date">Date</label>
        <input type="date" class="form-control" id="date"
            required
            [(ngModel)]="actualExpense.date" name="date"
            #date="ngModel">
        <div [hidden]="date.valid || date.pristine"
        class="alert alert-danger">
        Date is required
        </div>
      </div>

      <div class="form-group">
        <label for="tag">Tag</label>
        <select class="form-control" id="tag"
            [(ngModel)]="selectedTag" name="tag"
            #tagSelection="ngModel"
            (change)="onTagSelection(); tagSelection.reset()">
            <option disabled [ngValue]="null" selected>Add a tag</option>
            <option *ngFor="let predefinedTag of predefinedTags" [ngValue]="predefinedTag">{{predefinedTag.name}}</option>
        </select>
        <div [hidden]="tagSelection.valid || tagSelection.pristine"
        class="alert alert-danger">
        Tag is required
        </div>
      </div>

      <div class="form-group">
        <mat-chip-list #tagList aria-label="Tag selection"
          class="form-control">
          <mat-chip
            *ngFor="let tag of actualExpense.tags"
            [selectable]="selectable"
            [removable]="removable"
            (removed)="remove(tag)">
            {{tag.name}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input
            placeholder="Add tag"
            #tagInput
            [formControl]="tagControl"
            [matAutocomplete]="auto"
            [matChipInputFor]="tagList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            [matChipInputAddOnBlur]="addOnBlur"
            (matChipInputTokenEnd)="add($event)"
            class="borderless">
        </mat-chip-list>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
          <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
            {{tag.name}}
          </mat-option>
        </mat-autocomplete>
      </div>

      <div class="button-row">
        <button type="submit" [disabled]="editExpenseForm.invalid " class="btn btn-success">{{mode}}</button>
        <button type="button" class="btn btn-info" (click)="resetTags(); editExpenseForm.reset(); resetingSnackBar()">Zur√ºcksetzen</button>
        <button type="button" class="btn btn-danger" (click)="resetTags(); editExpenseForm.reset(); closingSnackBar('cancel')"
          [routerLink]="['/expenses']">Abbrechen</button>
      </div>

    </form>
</div>