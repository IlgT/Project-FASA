<div class="container form-dialog">
    <h1>{{title}}</h1>
    <form [formGroup]="expenseForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="reason">Reason</label>
        <input type="text" class="form-control" formControlName="reason">
        <div *ngIf="!expenseForm.get('reason').valid && expenseForm.get('reason').touched"
          class="alert alert-danger">
          Reason is required
        </div>
      </div>

      <div formGroupName="originalAmount" class="noValidationVisualization">
        <label for="amount">Amount</label>
        <div class="amount-row">
          <input type="tel" class="form-control"
            formControlName="value" currencyMask>
          <select formControlName="currency" class="form-control">
            <option *ngFor="let currency of currencies" [ngValue]="currency">{{currency}}</option>
          </select>
        </div>
        <div *ngIf="!expenseForm.get('originalAmount').valid && expenseForm.get('originalAmount').touched"
          class="alert alert-danger">
          Amount is required
        </div>
      </div>

      <div class="form-group">
        <label for="date">Date</label>
        <input type="date" class="form-control" formControlName="date">
        <div *ngIf="!expenseForm.get('date').valid && expenseForm.get('date').touched"
          class="alert alert-danger">
          Date is required
        </div>
      </div>

      <div class="form-group">
        <label for="tag">Tag</label>
          <mat-chip-list #tagList aria-label="Tag selection"
            class="form-control">
          <mat-chip
            *ngFor="let tag of selectedTags"
            [selectable]="selectable"
            [removable]="removable"
            (removed)="remove(tag)">
            {{tag}}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input
            placeholder="Add tag..."
            #tagInput
            formControlName="tags"
            [matAutocomplete]="auto"
            [matChipInputFor]="tagList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            (matChipInputTokenEnd)="add($event)"
            class="borderless">
        </mat-chip-list>
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
          <mat-option *ngFor="let tag of filteredTags | async" [value]="tag">
            {{tag}}
          </mat-option>
        </mat-autocomplete>
      </div>

      <div class="button-row">
        <button type="submit" [disabled]="expenseForm.invalid" class="btn btn-success">{{mode}}</button>
        <button type="button" class="btn btn-info" (click)="onReset()">Zur√ºcksetzen</button>
        <button type="button" class="btn btn-danger" (click)="closingSnackBar('cancel')"
          [routerLink]="['/expenses']">Abbrechen</button>
      </div>
    </form>
</div>
<app-loading-spinner *ngIf="isLoading$ | async"></app-loading-spinner>